<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apologia – Sermon Refinement</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Login Modal -->
  <div id="loginModal" class="modal active">
    <div class="modal-content">
      <h2>Apologia</h2>
      <p>Enter your name to get started</p>
      <form id="loginForm">
        <input id="loginPastorName" type="text" placeholder="Your name" required autocomplete="off"/>
        <button type="submit" class="btn btn-primary">Sign In</button>
      </form>
    </div>
  </div>

  <!-- Navbar -->
  <nav id="navbar" class="navbar">
    <div class="navbar-left">
      <h1 class="logo">Apologia</h1>
    </div>
    <div class="navbar-center">
      <span id="apiStatusDot" class="status-dot offline"></span>
      <span id="apiStatusText" class="api-status">Offline</span>
    </div>
    <div class="navbar-right">
      <div class="user-menu">
        <button id="navbarUser" class="user-trigger" type="button"></button>
        <div id="userMenuDropdown" class="user-dropdown">
          <button class="dropdown-item dropdown-item--disabled" type="button" disabled>Profile</button>
          <button class="dropdown-item dropdown-item--disabled" type="button" disabled>Settings</button>
          <button id="navbarLogoutBtn" class="dropdown-item" type="button">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main id="mainContent" class="main-content" style="display: none;">
    <!-- Home Page -->
    <div id="homePage" class="page">
      <div class="page-header">
        <h2>Sermons</h2>
        <button id="uploadBtn" class="btn btn-primary">Upload Sermon</button>
      </div>

      <!-- Sermons Table -->
      <div id="sermonsList" class="sermons-table">
        <div class="table-header">
          <div class="col col-name">
            <div class="col-label">Sermon Name</div>
            <input id="filterName" type="text" placeholder="Filter..." class="filter-input"/>
          </div>
          <div class="col col-series">
            <div class="col-label">Series</div>
            <input id="filterSeries" type="text" placeholder="Filter..." class="filter-input"/>
          </div>
          <div class="col col-date">
            <div class="col-label">Date</div>
            <input id="filterDate" type="text" placeholder="Filter..." class="filter-input"/>
          </div>
          <div class="col col-pastor">
            <div class="col-label">Pastor</div>
            <input id="filterPastor" type="text" placeholder="Filter..." class="filter-input"/>
          </div>
          <div class="col col-status">
            <div class="col-label">Status</div>
            <select id="filterStatus" class="filter-input">
              <option value="">All</option>
              <option value="uploaded">Uploaded</option>
              <option value="reviewed">Reviewed</option>
              <option value="generated">Generated</option>
            </select>
          </div>
          <div class="col col-actions">
            <div class="col-label">Actions</div>
          </div>
        </div>
        <div id="sermonTableBody" class="table-body"></div>
      </div>
    </div>

    <!-- Review Page (hidden by default) -->
    <div id="reviewPage" class="page" style="display: none;">
      <div class="review-header">
        <button id="backBtn" class="btn btn-secondary">← Back</button>
        <h2 id="reviewTitle">Review</h2>
        <div class="review-actions">
          <button id="analyzeBtn" class="btn btn-secondary">Analyze Slide</button>
          <button id="analyzeAllBtn" class="btn btn-secondary">Analyze All</button>
          <button id="saveChangesBtn" class="btn btn-secondary">Save Changes</button>
          <button id="generatePptxBtn" class="btn btn-primary">Generate PPTX</button>
          <a id="downloadPptxLink" class="btn btn-success" style="display: none;">Download</a>
        </div>
      </div>

      <div class="review-container">
        <!-- Left: Slide Viewer -->
        <div class="slide-viewer">
          <div id="slidePreview" class="slide-preview">
            <p>Slide preview will appear here</p>
          </div>
          <div class="slide-controls">
            <button id="prevSlideBtn" class="btn btn-secondary">← Prev</button>
            <span id="slideCounter" class="slide-counter">Slide 1 of 0</span>
            <button id="nextSlideBtn" class="btn btn-secondary">Next →</button>
          </div>
          <div id="slideList" class="slide-list"></div>
        </div>

        <!-- Right: Suggestions Panel -->
        <div class="suggestions-panel">
          <h3>Suggestions</h3>
          <div id="suggestionsContainer" class="suggestions-container">
            <p class="empty-state">Suggestions will appear here after analysis.</p>
          </div>
          <div id="reviewStatus" class="review-status"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- Upload Modal -->
  <div id="uploadModal" class="modal">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h3>Upload Sermon</h3>
        <button id="closeUploadBtn" class="btn-close">✕</button>
      </div>
      <form id="uploadForm" class="upload-form">
        <div class="form-group">
          <label for="sermonNameInput">Sermon Name *</label>
          <input id="sermonNameInput" type="text" name="sermonName" placeholder="e.g., Hope in Christ" required/>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="seriesNameInput">Series Name</label>
            <input id="seriesNameInput" type="text" name="seriesName" placeholder="e.g., Philippians"/>
          </div>
          <div class="form-group">
            <label for="weekOrDateInput">Week/Date</label>
            <input id="weekOrDateInput" type="date" name="weekOrDate"/>
          </div>
        </div>

        <div class="form-group">
          <label for="pastorNameInput">Pastor Name</label>
          <input id="pastorNameInput" type="text" name="pastorName" placeholder="e.g., Pastor John"/>
        </div>

        <div class="form-group">
          <label for="fileInput">PPTX File *</label>
          <div id="fileDropZone" class="file-dropzone">
            <p>Drag and drop your PPTX file here, or click to browse</p>
            <input id="fileInput" type="file" name="file" accept=".pptx" style="display: none;" required/>
          </div>
        </div>

        <div id="uploadStatus" class="upload-status"></div>

        <div class="form-actions">
          <button type="button" id="cancelUploadBtn" class="btn btn-secondary">Cancel</button>
          <button type="submit" class="btn btn-primary">Upload Sermon</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Overlay for modals -->
  <div id="modalOverlay" class="modal-overlay"></div>
  <div id="toastContainer" class="toast-container"></div>

  <script src="app.js"></script>
</body>
</html>
